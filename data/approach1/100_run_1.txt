Mode: HETEROGENEOUS (CPU + GPU)
GPU ratio: 81.4% GPU, 18.6% CPU
========== HETEROGENEOUS CONFIGURATION ==========
Input file: ./image_320x240.jpg
Number of images in stream: 5000
Batch size: 100 images
Number of batches: 50
Work-group size: 16x16
Execution mode : 0
================================================

Original image loaded: 320x240, 3 channels
Size of one image: 230400 bytes (225.00 KB)
Original image converted to interleaved format

Platform 0: Intel(R) FPGA Emulation Platform for OpenCL(TM)
Platform 1: Intel(R) OpenCL
Platform 2: Intel(R) OpenCL HD Graphics
CPU device: 12th Gen Intel(R) Core(TM) i7-12700
GPU device: Intel(R) Graphics [0x4680]

Loading kernel source...
Kernel source loaded (2054 bytes)
Building kernel for CPU...
CPU kernel built successfully
Building kernel for GPU...
GPU kernel built successfully
Kernel objects created

Allocating device buffers...
Device buffers allocated

Setting kernel arguments...
Kernel arguments set

Global work size: 320 x 240
Local work size: 16 x 16

Starting batch processing of 5000 images in 50 batches...

All batches finished!

========== PERFORMANCE RESULTS ==========

BATCH SIZE : 100
1. OVERALL EXECUTION TIME
   Total wall-clock time: 1093.34 ms (1.09 seconds)
   Total images processed: 5000

2. CPU DEVICE (processed 950 images)
   Total CPU time:        623.02 ms
   - Transfer IN:         29.27 ms (4.7%)
   - Kernel execution:    222.45 ms (35.7%)
   - Transfer OUT:        371.30 ms (59.6%)
   Average per image:     0.66 ms

3. GPU DEVICE (processed 4050 images)
   Total GPU time:        492.75 ms
   - Transfer IN:         89.36 ms (18.1%)
   - Kernel execution:    354.96 ms (72.0%)
   - Transfer OUT:        48.43 ms (9.8%)
   Average per image:     0.12 ms

====================
4. DEVICE COMPARISON
   GPU is 1.26x FASTER than CPU
   CPU/GPU time ratio: 1.26

5. WORKLOAD BALANCE
   Workload imbalance: 20.9%
   CPU is the BOTTLENECK (130.27 ms slower)

6. BOTTLENECK IDENTIFICATION
   CPU bottleneck: COMMUNICATION (64.3% of time)
   GPU bottleneck: COMPUTATION (72.0% of time)

7. THROUGHPUT
   Overall throughput: 351.22 Megapixels/sec
   Images per second: 4573.14

=========================================

8. OPTIMAL RATIO RECOMMENDATION
   Based on measured performance:
   CPU: 0.656 ms/image
   GPU: 0.122 ms/image
   Recommended GPU ratio: 84.4%
   Run with: ./heterogeneous_blur both 0.844

